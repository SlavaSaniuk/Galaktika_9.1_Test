!Поля приложения 8 к Правилам перевозок грузов автомобильным транспортом (p8_TTN.rtf)
.fields
!Шапка накладной
  Ean13ToEanGnivcTTF(GenerateBarCodeEx(coKatSopr, накладная_нрек))
 // if (Дата=Date(0,0,0),'',DateToStr(Дата,'DD/MM/YYYY'))
  Номер

  oPrnSoprFun.GetOrgFullName(накладная_нрек, 1, 1) + ' ' + oPrnSoprFun.GetOrgFullName(накладная_нрек, 1, 2)
  oPrnSoprFun.GetOrgFullName(накладная_нрек, 2, 1) + ' ' + oPrnSoprFun.GetOrgFullName(накладная_нрек, 2, 2)
  Грузоотправитель_Адрес
  Грузополучатель_Адрес

  отпуск_разрешил_должность
  отпуск_разрешил
  сдал_отправитель_должность
  сдал_отправитель

!Спецификация
  Название

  if (KolGrM = '-', if (KolOneGrM <>'', 'Грузовых мест - ' + KolOneGrM + ', ', ''), if (KolGrM <>'', 'Грузовых мест - ' + KolGrM + ', ', ''))
  if (КодМЦ <>'', 'маркировка - ' + КодМЦ + ', ', '')

  'вид упаковки - ' + if (ЕД_ИЗМЕРЕНИЯ_ГРУЗОВЫХ_МЕСТ <> '', ЕД_ИЗМЕРЕНИЯ_ГРУЗОВЫХ_МЕСТ, ОтпЕд)

!  if (DoubleToStr((МассаМЦ)* КолУч, Massa_Kg) <>'', DoubleToStr((МассаМЦ)* КолУч, Massa_Kg) + 'кг. ', '')
!  if (DoubleToStr((МассаМЦ+МассаТарыМЦ)* КолУч, Massa_Kg) <>'', '(' + DoubleToStr((МассаМЦ+МассаТарыМЦ)* КолУч, Massa_Kg) + 'кг.)', '')
!  oPrnSoprFun.GetMassaBr(Признак_МЦ, ((МассаМЦ + МассаТарыМЦ) * КолУч))

! if (DoubleToStr((МассаМЦ)* КолУч, Massa_Kg) <>'', oPrnSoprFun.GetMassaBr(Признак_МЦ, (МассаМЦ * КолУч)) + 'кг. ', '')
! if (DoubleToStr((МассаМЦ+МассаТарыМЦ)* КолУч, Massa_Kg)<>'', '(' + oPrnSoprFun.GetMassaBr(Признак_МЦ, ((МассаМЦ + МассаТарыМЦ) * КолУч)) + 'кг.)', '')


  case (wRoundMass2;
        0..2: if ((МассаМЦ + МассаТарыМЦ) * КолУч <> 0,'(' + DoubleToStr(Round((МассаМЦ * КолУч) / 1000, wRoundMass2) * 1000, Massa_Kg) + 'кг.) ', ''),
        3: if ((МассаМЦ + МассаТарыМЦ) * КолУч <> 0, '(' + DoubleToStr(Round((МассаМЦ * КолУч), wRoundMass2 mod 3), Massa_Kg) + 'кг.) ', ''),
        4: if (МассаМЦ* КолУч <> 0, Trim(String(Round(МассаМЦ* КолУч*10)/10,20,1)) + 'кг. ', ''),
        5: if (МассаМЦ* КолУч <> 0, Trim(String(Round(МассаМЦ* КолУч*100)/100,20,2)) + 'кг. ', ''),
        6: if (МассаМЦ* КолУч <> 0, Trim(String(Round(МассаМЦ* КолУч*1000)/1000,20,3)) + 'кг. ', ''))

  case (wRoundMass2;
        0..2: if (МассаМЦ* КолУч <> 0, DoubleToStr(Round(((МассаМЦ + МассаТарыМЦ) * КолУч) / 1000, wRoundMass2) * 1000, Massa_Kg) + 'кг. ', ''),
        3: if (МассаМЦ* КолУч <> 0, DoubleToStr(Round(((МассаМЦ + МассаТарыМЦ) * КолУч), wRoundMass2 mod 3), Massa_Kg) + 'кг. ', ''),
        4: if ((МассаМЦ + МассаТарыМЦ) * КолУч <> 0,'(' + Trim(String(Round((МассаМЦ + МассаТарыМЦ) * КолУч*10)/10,20,1)) + 'кг.) ', ''),
        5: if ((МассаМЦ + МассаТарыМЦ) * КолУч <> 0,'(' + Trim(String(Round((МассаМЦ + МассаТарыМЦ) * КолУч*100)/100,20,2)) + 'кг.) ', ''),
        6: if ((МассаМЦ + МассаТарыМЦ) * КолУч <> 0,'(' + Trim(String(Round((МассаМЦ + МассаТарыМЦ) * КолУч*1000)/1000,20,3)) + 'кг.) ', ''))

  if (String(SizeX) <>'', 'Высота - ' + String(SizeX) + 'м., ', '')
  if (String(SizeY) <>'', 'ширина - ' + String(SizeY) + 'м., ', '')
  if (String(SizeZ) <>'', 'длина - '  + String(SizeZ) + 'м.', '')

  if (String(ОбъемМЦ) <>'', ', объем - ' + String(ОбъемМЦ) + 'м3.', '')

  oPrnSoprFun.GetVagon(накладная_нрек, 2)
  If(ТТН_ПунктП_Дата_С = Date(0,0,0),'', DateToStr(ТТН_ПунктП_Дата_С,'DD/MM/YY'))
  if (ТТН_ПунктП_Время_С <>'00:00', ТТН_ПунктП_Время_С,'')
  If(ТТН_ПунктП_Дата_По = Date(0,0,0),'', DateToStr(ТТН_ПунктП_Дата_По,'DD/MM/YY'))
  if (ТТН_ПунктП_Время_По <>'00:00', ТТН_ПунктП_Время_По,'')
  If(ТТН_ПунктР_Дата_С = Date(0,0,0),'', DateToStr(ТТН_ПунктР_Дата_С,'DD/MM/YY'))
  if (ТТН_ПунктР_Время_С <>'00:00', ТТН_ПунктР_Время_С,'')
  If(ТТН_ПунктР_Дата_По = Date(0,0,0),'', DateToStr(ТТН_ПунктР_Дата_По,'DD/MM/YY'))
  if (ТТН_ПунктР_Время_По <>'00:00', ТТН_ПунктР_Время_По,'')

//  #ifdef _IN_VAL_DOC_
//     DoubleToStr(АСтНацСН,Cena_Pr)
//     НакСимвол
//  #else
//     DoubleToStr(АСтНацСН,Cena_PrR)
//     НацСимвол
//  #end

!Валюта прописью
/*#ifdef _IN_VAL_DOC_
  DoubleToStr(АСтНацСН,Cena_Pr)
  НакСимвол
  DoubleToString(Валюта_нрек, Round(АСтНацСН, GetPrecisionGroup('brForSopr_RVPrice')))
#else
  DoubleToStr(АСтНацСН,Cena_PrR)
  НацСимвол
  DoubleToString(comp(0), Round(АСтНацСН, GetPrecisionGroup('brForSopr_Price')))
#end      */


  oPrnSoprFun.GetPunktFields(ТТН_ПунктП_Имя, ТТН_ПунктП_СТРАНА_ИМЯ, ТТН_ПунктП_ГОРОД_ИМЯ, ТТН_ПунктП_Адрес)
  oPrnSoprFun.GetPunktFields(ТТН_ПунктР_Имя, ТТН_ПунктР_СТРАНА_ИМЯ, ТТН_ПунктР_ГОРОД_ИМЯ, ТТН_ПунктР_Адрес)

  If(ТТН_ПунктП_Дата_С = Date(0,0,0),'', DateToStr(ТТН_ПунктП_Дата_С,'DD/MM/YY'))
  if (ТТН_ПунктП_Время_С <>'00:00', ТТН_ПунктП_Время_С,'')
  If(ТТН_ПунктР_Дата_С = Date(0,0,0),'', DateToStr(ТТН_ПунктР_Дата_С,'DD/MM/YY'))
  if (ТТН_ПунктР_Время_С <>'00:00', ТТН_ПунктР_Время_С,'')
  If(ТТН_ПунктП_Дата_По = Date(0,0,0),'', DateToStr(ТТН_ПунктП_Дата_По,'DD/MM/YY'))
  if (ТТН_ПунктП_Время_По <>'00:00', ТТН_ПунктП_Время_По,'')
  If(ТТН_ПунктР_Дата_По = Date(0,0,0),'', DateToStr(ТТН_ПунктР_Дата_По,'DD/MM/YY'))
  if (ТТН_ПунктР_Время_По <>'00:00', ТТН_ПунктР_Время_По,'')

  if (DoubleToStr (MassaBrItog, Massa_Kg) <>'', 'Масса брутто - '+MassaInWords (MassaBrItog, wRoundMass2), '')
  if (DoubleToStr (Round(CountKolF, KolZn), strDr) <>'', ', грузовых мест - ' +DoubleToStr (Round(CountKolF, KolZn), strDr), '')

  if (DoubleToStr (MassaBrItog, Massa_Kg) <>'', 'Масса брутто - '+MassaInWords (MassaBrItog, wRoundMass2), '')
  if (DoubleToStr (Round(CountKolF, KolZn), strDr) <>'', ', грузовых мест - ' +DoubleToStr (Round(CountKolF, KolZn), strDr), '')

  отпуск_разрешил
  if (Trim(ТТН_Водитель_НомерУдост) <> '', ТТН_Водитель_Имя , водитель)
  сдал_отправитель
  if (Trim(ТТН_Водитель_НомерУдост) <> '', ТТН_Водитель_Имя , водитель)
!Товарно-транспортная информация
  ТТН_АвтоОрг_Имя
  if (Trim(ТТН_Водитель_НомерУдост) <> '', ТТН_Водитель_Имя , водитель)
  ТТН_АвтоОрг_Адрес

  ТТН_Номер_ПЛист

  if (Trim(ТТН_Авто_Номер) <> '', 'Автомобиль - ' + ТТН_Авто_Марка, 'Автомобиль -' + автомобиль)
  if (ТТН_Прицеп1_Марка <> '', ', прицеп - ' + ТТН_Прицеп1_Марка, '')
  if (ТТН_Прицеп2_Марка <> '', ', прицеп - ' + ТТН_Прицеп2_Марка, '')
  if (ТТН_Авто_Груз <> '', ', грузоподъемность - ' + String(Round(Double(ТТН_Авто_Груз),2))+'т.', '')

  if (Trim(ТТН_Авто_Номер) <> '', 'Номер автомобиля - ' +ТТН_Авто_Номер, '')
  if (ТТН_Прицеп1_Номер <> '', ', номер прицепа - ' + ТТН_Прицеп1_Номер, '')
  if (ТТН_Прицеп2_Номер <> '', ', номер прицепа - ' + ТТН_Прицеп2_Номер, '')

  Грузоотправитель
  if (Дата=Date(0,0,0),'',DateToStr(Дата,'DD/MM/YYYY'))
  отпуск_разрешил
  ТТН_АвтоОрг_Имя
  if (Дата=Date(0,0,0),'',DateToStr(Дата,'DD/MM/YYYY'))
  Грузополучатель
  if (Дата=Date(0,0,0),'',DateToStr(Дата,'DD/MM/YYYY'))
  сдал_отправитель

  СпецСимвол
.endfields
